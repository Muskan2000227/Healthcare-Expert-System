{% extends 'sidebar1.html' %}
{% load static %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disorder</title>
    <!-- jQuery (necessary for Select2) -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<!-- Select2 CSS and JS -->
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<!-- Bootstrap for better UI (optional) -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />


    <style>
        .mental1{
            width:100%;
            height:100vh;
            overflow: hidden;
        }

        .mainc{
            display: flex;
            justify-content: center;
            margin-top: -80px;
        }

        .selectc{
            width: 80%;
            height:150px;
            background-color: #9370DB;
            padding-left: 50px;
            padding-right: 50px;
            padding-top: 20px;
            border-radius: 20px;
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
            border: 1px solid white;
            transition: transform 0.3s ease;
        }

        .selectc:hover {
        transform: translateY(-10px); /* Lift effect */
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15); /* Enhanced shadow on hover */
    }

        .btndiv{
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn {
            width: 200px;
            padding: 12px;
            background-color:#D80027;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            transition: background-color 0.3s ease;
            margin-top: 10px;

        }

        .btn:hover {
            background-color:#D80027;
            color: white;
            transform: scale(1.04);
        }

        /* Styles for the table box */
        .table-container {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            transition: transform 0.3s ease;
        }
      

        .table-box {
            width: 90%;
            background-color: #f0f0f5;
            padding: 20px;
            border-radius: 20px;
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
            border: 1px solid #9370DB;
            height:480px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 30px;
        }

        table, th, td {
            border: 1px solid #9370DB;
        }

        th, td {
            padding: 12px;
            text-align: center;
        }

        th {
            background-color: #9370DB;
            color: white;
        }

        td {
            background-color: #fafafa;
        }
        .mendis{
            text-align: center;
            font-size: 30px;
            margin-top: 10px;
        }

        .maing {
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 30px;
    width: 90%;
    height: 490px; /* Define height */
    margin-left: auto;
    margin-right: auto;
    padding: 20px;
    border-radius: 15px;
    box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px;
}


         /* Change the dropdown container appearance */
         .select2-container--default .select2-selection--multiple {
        background-color: #f1f1f1; /* Background for the select box */
        border: 1px solid #ccc; /* Border styling */
        border-radius: 8px; /* Rounded corners */
        padding: 10px; /* Padding inside the select box */
        padding-top: 5px;
        transition: all 0.3s ease-in-out; /* Smooth transition effect */
        width:650px; /* Fixed width for the container */
    max-width: 670px; /* Prevent width from expanding beyond its container */
    white-space: nowrap; /* Prevent items from wrapping to new lines */
    overflow-x: auto; /* Enable horizontal scrolling */
    overflow-y: hidden; /* Disable vertical scrolling */
    scrollbar-width: none; /* Hide scrollbar for Firefox */
    -ms-overflow-style: none; /* Hide scrollbar for Internet Explorer */
    display: block;
    box-sizing: border-box; /* Ensure padding and borders are included in the width */
    }


/* Hide scrollbar for WebKit browsers (Chrome, Safari, Edge) */
.select2-container--default .select2-selection--multiple::-webkit-scrollbar {
    display: none;
}
    /* Style for selected items */
    .select2-container--default .select2-selection--multiple .select2-selection__choice {
        background-color: #5c4e91; /* Selected items background */
        border: 1px solid #5c4e91; /* Border around selected items */
        border-radius: 4px; /* Rounded corners */
        color: #fff; /* Text color */
        font-weight: 500; /* Bold text */
    }

    /* Hover effect on selected items */
    .select2-container--default .select2-selection--multiple .select2-selection__choice:hover {
        background-color: #44427d; /* Darker background on hover */
        border-color: #44427d; /* Darker border on hover */
    }

    /* Customize the dropdown options */
    .select2-dropdown {
        border-radius: 10px; /* Rounded corners for dropdown */
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1); /* Box shadow for dropdown */
        border: 1px solid #ccc;
    }

    /* Dropdown item styling */
    .select2-results__option {
        padding: 10px; /* Increase padding for dropdown items */
        font-size: 1rem; /* Change font size */
    }

    /* Highlight dropdown item on hover */
    .select2-results__option--highlighted {
        background-color: #5c4e91; /* Background color when highlighted */
        color: white; /* Text color when highlighted */
    }

    /* Placeholder text color */
    .select2-container--default .select2-selection--multiple .select2-search--inline .select2-search__field::placeholder {
        color: #888;
        font-style: italic;
    }


#graph{
 margin-top: 50px;
 /* height:400px; */
}

.arrow56{
            margin-top: 50px;
            margin-left:40px;
        }

        .selectcy{
            display: flex;
            /* gap:10px; */
        
        }

        .ydes{
            width:40%;
            height:40px;
            border-radius: 10px;
            outline:none;
        }

            /* For mobile screens */
    @media (max-width: 480px) {
        .mental1{
            
            overflow:scroll;
        }
        .mainc{
            overflow: scroll;
            margin-top: 70px;
        }

        .arrow56{
            position: absolute;
            z-index:2;
            margin-top: -5px;
        }

        .selectc {
            width: 95%;
            flex-direction: column;
            align-items: flex-start;
            
            height:250px;
            overflow: hidden;
        }

        .selectcy {
            flex-direction: column;
            gap: 10px;
        }

        .select2-container--default .select2-selection--multiple {
       width:100%;
        }

        .ydes{
            width: 100%;;
        }

        .btn {
            width: 100%;
            padding: 10px;
        }
        .table-box {
            max-width: 90%;  /* Reduce width to 95% for small screens */
            padding: 10px;
        }

        th, td {
            font-size: 10px;
            padding: 3px;
        }
    }
        
    </style>

</script>
</head>

<body>

    <section class="mental1">
        <a href="{% url 'depsnalysis' %}">  <img src="{%static 'images/icons8-back-to-64.png' %}" class="arrow56" alt=""></a> 
        <div class="mainc">
            <div class="selectc">
                <form action="" method="POST" onsubmit="return validateForm()">
                    {% csrf_token %}
                   
                 <div class="selectcy">  
                <select name="country[]" id="countselect" multiple="multiple" class="form-control" style="width:100%; color: black;">
                    <!-- <option value="">Select countries</option> -->
                   {% for i in entity %}
                       <option value="{{i}}" {% if i in selected_countries %}selected{% endif %}>{{i}}</option>
                   {% endfor %}
                </select>

                <select name="year" id="country" class="ydes">
                    <option selected disabled value="" >Select Year</option>
                    {% for i in nyear %}
                    <option value="{{i}}">{{i}}</option>
                    {% endfor %}
                </select>
            </div> 
                <div class="btndiv">  
                <button type="submit" class="btn ">Submit</button>  
            </div>  
                </form>
<!-- Info Table -->
            </div>
        </div>

        <!-- Added Table Box Below -->
         <!-- Conditionally render the graph or the table -->
         {% if graph %}
         <div class="maing">
             <!-- Embed the graph data here -->
             <div id="graph">{{ graph|safe }}</div>
         </div>
         {% else %}
         <!-- Added Table Box Below -->
         <div class="table-container">
             <div class="table-box">
                 <h3 class="mendis">Depression Disorder Data</h3>
                 <table>
                    <thead>
                        <tr>
                            <th>Year</th>
                            <th>Country</th>
                            <th>Depression Disorders - Male (%)</th>
                            <th>Depression Disorders - Female (%)</th>
                            <th>Population</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>2024</td>
                            <td>India</td>
                            <td>5.4</td>
                            <td>6.2</td>
                            <td>1.426 billion</td>
                        </tr>
                        <tr>
                            <td>2024</td>
                            <td>Australia</td>
                            <td>4.7</td>
                            <td>5.2</td>
                            <td>25 million</td>
                        </tr>
                        <tr>
                            <td>2024</td>
                            <td>China</td>
                            <td>4.0</td>
                            <td>4.7</td>
                            <td>1.426 billion</td>
                        </tr>
                        <tr>
                            <td>2024</td>
                            <td>America</td>
                            <td>7.5</td>
                            <td>9.0</td>
                            <td>334 million</td>
                        </tr>
                        <tr>
                            <td>2024</td>
                            <td>England</td>
                            <td>6.4</td>
                            <td>7.8</td>
                            <td>56 million</td>
                        </tr>
                        <tr>
                            <td>2024</td>
                            <td>Brazil</td>
                            <td>5.9</td>
                            <td>6.5</td>
                            <td>213 million</td>
                        </tr>
                    </tbody>
                </table>
                
                
             </div>
         </div>
         {% endif %}
    </section>

</body>

<script>
    $(document).ready(function () {
        $('#countselect').select2({
            placeholder: 'Select countries',
            width: '100%',
        });
    });


    function validateForm() {
    var selectedCountries = $('#countselect').val(); // Get selected country values
    var selectedYear = $('#country').val(); // Get selected year value

    // Validate country selection
    if (!selectedCountries || selectedCountries.length < 2) {
        alert("Please select at least two countries!");
        return false; // Prevent form submission
    }

    // Validate year selection
    if (!selectedYear) {
        alert("Please select a year!");
        return false; // Prevent form submission
    }

    return true; // Allow form submission
}


</script>
</html>
{% endblock %}
